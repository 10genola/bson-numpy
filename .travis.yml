language: python

# safelist
branches:
  only:
  - dev

env:
  - BSON_DIR=`pwd`/libbson/bson-build LD_LIBRARY_PATH=$BSON_DIR/lib:$LD_LIBRARY_PATH

install:
- echo $BSON_DIR
- echo $LD_LIBRARY_PATH
- sudo apt-get install git-core automake autoconf libtool gcc
- git clone git://github.com/mongodb/libbson.git
- cd libbson/
- mkdir bson-build
- ./autogen.sh --prefix=`pwd`/bson-build
- make
- make install
- cd ..
- pip install numpy
- pip install pymongo


python:
  - "2.6"
  - "2.7"
  - "3.4"
  - "3.5"

script: python setup.py test

